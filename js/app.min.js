$(function(){function e(e){return e.height()}function o(e,o){"show"===o?$(e).modal({show:!0,keyboard:!1,backdrop:"static"}):"hide"===o&&$(e).modal("hide")}function s(e,o){$(e).length&&e!==o&&"#"!==e&&"#"===e.substr(0,1)&&(r=e,$("html, body").stop().animate({scrollTop:$(e).offset().top-i},{duration:360,easing:"easeOutCirc",complete:function(){r=null}}))}var r=null,t=navigator.userAgent.match(/Mobi/i),n=("ontouchstart"in window||window.DocumentTouch&&(document,DocumentTouch),$("#main-header")),i=e(n),a=$("#console-messages"),l=[];$.validator.setDefaults({errorElement:"span",errorClass:"form-error",highlight:function(e,o,s){$(e).closest(".form-group").addClass("has-error")},unhighlight:function(e,o,s){$(e).closest(".form-group").removeClass("has-error")},errorPlacement:function(e,o){o.parent(".input-group").length||"checkbox"===o.prop("type")||"radio"===o.prop("type")||o.parent(".form-select").length?e.insertAfter(o.parent()):o.hasClass("selectpicker")?e.insertAfter(o.parent().children(".bootstrap-select")):e.insertAfter(o)}});flowplayer("#video-player",{qualities:["360p","480p","720p"],defaultQuality:"360p",clip:{sources:window.App.videoSources},loop:!1,splash:!0,origin:window.location,key:"",logo:"",swf:"swf/flowplayer.swf",wmode:"opaque",ratio:9/16,embed:!1,advance:!1,swfHls:!1});var c={};$("#form-resource").children("option").each(function(e,o){c[e+1]=o.textContent}),t?($("select").prepend('<option value="0" selected disabled>Amount Gold</option>').wrap('<div class="form-select" />'),$(".form-group").on("focus blur",".form-control",function(e){"focusin"===e.type?n.addClass("header-mobile-fix"):"focusout"===e.type&&n.removeClass("header-mobile-fix")})):($("select").addClass("selectpicker"),$(".selectpicker").selectpicker({style:"btn-select is-empty",container:"#select-container"}).on("change",function(e){var o=$(this);o.next().children(".btn-select").removeClass("is-empty"),o.closest("form").length&&$("form").validate().element(o)})),$("body").scrollspy({target:"#navbar-top",offset:n.height()});var p=$("#section-home"),u=$(".reduce-opacity"),d=$(".intro"),f=$("#section-arrow"),h=e(p),m=!1;$(window).on("scroll",function(){var e=$(this).scrollTop(),o=(e/h).toFixed(3),s=50+50*o;if(e<=h&&(m=!1),!m){if(e>=h)return m=!0,u.css("opacity",0),d.addClass("hide").css("transform","translateY(-100%)"),void f.addClass("hide").css("opacity",0);u.css("opacity",1-o),d.removeClass("hide").css("transform","translateY(-"+s+"%)"),f.removeClass("hide").css("opacity",1-5*o)}}).on("resize",function(){i=e(n),h=e(p)});var v=$(".navbar-toggle");$("#navbar-top").on("show.bs.collapse",function(){v.addClass("active")}).on("hide.bs.collapse",function(){v.removeClass("active")}),$("[data-scroll]").on("click",function(e){e.preventDefault(),s($(this).data("scroll"),r)}),$("#form-request").validate({ignore:[],rules:{"form-user":{required:!0,alphanumeric:!0},"form-resource":{required:!0}},submitHandler:function(e,s){s.preventDefault();var r={self:$(e),user:$("#form-user"),resource:$("#form-resource"),submit:$("#form-submit")},t=r.resource.children("option:selected").val();l=$.map(window.App.consoleMessages,function(e,o){return 3===o?"<li>"+e.replace("{user}",r.user.val()).replace("{amount}",c[t])+"...</li>":"<li>"+e+"...</li>"}),a.html(l),o("#modal-process","show"),r.self[0].reset(),$(".selectpicker").selectpicker("refresh");var n=a.children("li"),i=0;!function e(){n.eq(i).show().shuffleLetters({step:12,callback:function(o){if($(o).is(":last-child"))return $("#process-spinner").addClass("done"),void a.parent().next().show();++i,e()}})}()}}),$("#open-offers").on("click",function(){$(this).button("loading"),o("#modal-process","hide")}),$("#modal-process").on("hidden.bs.modal",function(){$("#process-spinner").removeClass("done"),a.parent().next().hide()})});